<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:p="http://primefaces.org/ui"
	  xmlns:h="http://xmlns.jcp.org/jsf/html"
	  xmlns:f="http://xmlns.jcp.org/jsf/core"
	  xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <f:view contentType="text/html">
        <h:head>
			<ui:include src="/WEB-INF/include/header.xhtml" />
        </h:head>

        <h:body style="background-color: whitesmoke;">
			<div class="row" style="padding: 12px 0px 32px 20px;">
				<h:form id="form">
					<p:poll interval="60" listener="#{account.polling}" />
					<div style="padding: 12px 0px 32px 20px;">
						<p:outputPanel styleClass="controls" rendered="#{!account.notSignin}">
							<ui:insert name="menubar" />
							<div style="padding-bottom: 24px; padding-right: 24px; float: right;">

								<h:graphicImage value="#{gravatar.getGravatarUrl(account.account.email)}"
												height="30px" width="30px"/>

								<span style="width: 4px;" />

								<p:commandButton id="profile" icon="ui-icon ui-icon-contact"
												 value="#{account.account.firstname} #{account.account.lastname}"
												 styleClass="btn btn-mini btn-info"
												 action="#{profile.linkToProfile(facesContext.viewRoot.viewId)}"/>

								<span style="width: 4px;" />

								<p:commandButton id="logout" icon="ui-icon ui-icon-arrowthick-1-e"
												 styleClass="btn btn-mini btn-danger"
												 action="#{signin.logout}" />
							</div>
						</p:outputPanel>
						<p:outputPanel styleClass="controls" rendered="#{account.notSignin}">
							<div style="padding-bottom: 24px; padding-right: 24px; float: right;">
								<p:commandButton id="login" icon="ui-icon ui-icon-arrowthick-1-e"
												 value="Signin" styleClass="btn btn-mini btn-info"
												 onclick="window.location.href = '#{request.contextPath}signin';" />
							</div>
						</p:outputPanel>
					</div>

					<div style="padding: 12px 0px 32px 20px;">
						<div style="padding-top: 12px; padding-bottom: 12px;">
							<div style="padding-bottom: 12px; height: 260px;">
								<ui:insert name="content" />
							</div>
						</div>
					</div>
				</h:form>
			</div>
        </h:body>
    </f:view>
</html>
